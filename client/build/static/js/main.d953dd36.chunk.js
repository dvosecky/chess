(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),s=n.n(i),a=n(49),o=n.n(a),r=(n(57),n(58),n(21)),u=n(2),j=n(11);function l(e){var t=e.id,n=Object(i.useState)(!1),s=Object(j.a)(n,2),a=s[0],o=s[1];return Object(c.jsxs)("div",{className:"sub-container",children:[Object(c.jsxs)("div",{className:"m-1",children:["Share this link with your opponent:\xa0",Object(c.jsx)("span",{className:"copy-url",children:"https://dv-chess.herokuapp.com/game/"+t})]}),Object(c.jsx)("button",{onClick:function(){return o(!0)},children:"Join Game"}),a&&Object(c.jsx)(u.a,{to:"/game/"+t})]})}var b=function(){var e=Object(i.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1];return Object(c.jsxs)("div",{className:"main-container",children:[Object(c.jsxs)("div",{className:"sub-container",children:[Object(c.jsx)("h1",{children:"Chess"}),Object(c.jsx)("p",{children:"Play Chess with your friends!"}),Object(c.jsx)("button",{onClick:function(){fetch("game/create",{method:"POST"}).then((function(e){return e.json()})).then((function(e){"success"===e.status?s(e.data.id):"error"===e.status&&console.error(e.message)})).catch(console.error.bind(console))},children:"Create Game"})]}),""!==n&&Object(c.jsx)(l,{id:n})]})},d=n(51),h=n.n(d);var O=function(){var e=Object(u.g)().id,t=Object(i.useState)(!1),n=Object(j.a)(t,2),s=n[0],a=n[1],o=Object(i.useState)(),r=Object(j.a)(o,2),l=r[0],b=r[1],d=Object(i.useState)([]),O=Object(j.a)(d,2),p=O[0],f=O[1],m=Object(i.useState)({position:"absolute",top:0,left:0}),x=Object(j.a)(m,2),v=x[0],g=x[1],w=Object(i.useState)(null),y=Object(j.a)(w,2),S=y[0],N=y[1],k=[];Object(i.useEffect)((function(){var e=function(){N(null)};return document.addEventListener("mouseup",e),function(){return document.removeEventListener("mouseup",e)}}),[]),Object(i.useEffect)((function(){var t=h()();return t.emit("join",e),t.on("join failed",(function(e){console.log("join failed: "+e),a(!0)})),t.on("game data",(function(e){e.white===t.id?b("white"):e.black===t.id&&b("black"),f(e.pieces)})),function(){t.disconnect()}}),[e]);for(var C=function(e){g({position:"absolute",pointerEvents:"none",left:e.pageX-window.innerHeight/16+"px",top:e.pageY-window.innerHeight/16+"px"})},E=0;E<8;E++){k.push([]);for(var M=function(e){var t={};t.name="white"===l?"abcdefgh"[e]+(8-E):"hgfedcba"[e]+(E+1),t.piece=null,p.forEach((function(e){e.square===t.name&&(t.piece=e)})),k[E].push(t)},F=0;F<8;F++)M(F)}return Object(c.jsxs)("div",{onMouseMove:C,children:[Object(c.jsxs)("h1",{children:["This is game ",e]}),Object(c.jsxs)("h2",{children:["You are playing as ",l]}),s&&Object(c.jsx)(u.a,{to:"/"}),k.map((function(e,t){return Object(c.jsx)("div",{className:"row",children:e.map((function(e){return Object(c.jsx)("div",{className:"square",onMouseUp:function(){return function(e){S&&(f((function(t){var n=t.slice(),c=n.indexOf(S);return n[c]=Object.assign(S,{square:e.name}),n})),N(null))}(e)},children:e.piece&&S!==e.piece&&Object(c.jsx)("div",{className:"piece "+e.piece.player+"-"+e.piece.type,onMouseDown:function(t){return function(e,t){N(t.piece),C(e)}(t,e)}})},e.name)}))},t+1)})),S&&Object(c.jsx)("div",{className:"piece "+S.player+"-"+S.type,style:v})]})};var p=function(){return Object(c.jsx)(r.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{path:"/game/:id",children:Object(c.jsx)(O,{})}),Object(c.jsx)(u.b,{exact:!0,path:"/",children:Object(c.jsx)(b,{})}),Object(c.jsx)(u.b,{path:"*",children:Object(c.jsx)(u.a,{to:"/"})})]})})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),f()}},[[93,1,2]]]);
//# sourceMappingURL=main.d953dd36.chunk.js.map